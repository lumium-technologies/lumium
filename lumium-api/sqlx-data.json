{
  "db": "PostgreSQL",
  "0401f9586345e0232b3828ae376dec2c3084ca217ce973bf7cb4f60cba3f711f": {
    "describe": {
      "columns": [
        {
          "name": "workspace_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "activator",
          "ordinal": 1,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT workspace_id, activator\n            FROM end_to_end_keys\n            WHERE workspace_id = $1"
  },
  "128cf036ae32f2b8ae4a5d7dcb2e0bb71c686ca3f21dd9e305b5116529284cdc": {
    "describe": {
      "columns": [
        {
          "name": "session_id",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Inet",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO sessions \n            (profile_id, ip_address, user_agent)\n            VALUES \n            ($1, $2, $3)\n            RETURNING session_id"
  },
  "2624eb5076ea34c375065c6dccc6f7b82c90ef76e3d9a0065a9b3cdec1e22706": {
    "describe": {
      "columns": [
        {
          "name": "profile_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT profile_id\n            FROM sessions\n            WHERE session_id = $1\n            AND (hmac(session_token,\n                  (SELECT s.value\n                   FROM session_secrets s\n                   WHERE s.status = 'active'),\n                  'sha512') = decode($1, 'hex')\n                OR hmac(session_token,\n                        (SELECT s.value\n                         FROM session_secrets s\n                         WHERE s.status = 'phase_out'),\n                        'sha512') = decode($1, 'hex')\n                )"
  },
  "2d3ee1f5621da1035910b373b2d6065c0e797c1d77b48926ed155886325f1247": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "DELETE FROM sessions\n            WHERE profile_id = $1\n            AND (hmac(session_token,\n                  (SELECT s.value\n                   FROM session_secrets s\n                   WHERE s.status = 'active'),\n                  'sha512') = decode(session_id, 'hex')\n                OR hmac(session_token,\n                        (SELECT s.value\n                         FROM session_secrets s\n                         WHERE s.status = 'phase_out'),\n                        'sha512') = decode(session_id, 'hex')\n                )"
  },
  "3ab832ade92ed22ad713486837ddf7b197947f9fc9d0121a26679fc36c1050e5": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT id, name\n            FROM workspaces\n            WHERE id = $1"
  },
  "6ca2c005e081961a019179e1c0cbe8be263ddb655f493d3fede6fc376a209f9d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "pwd_hash",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT profiles.id, pwd_hash\n            FROM profiles JOIN emails\n                ON profiles.id = emails.profile_id\n            WHERE emails.address = $1;"
  },
  "6ce912067a2e8a4a2cd7208cf2df74e73612f958937397815a83c960e4b9e628": {
    "describe": {
      "columns": [
        {
          "name": "update_session_secret",
          "ordinal": 0,
          "type_info": "Void"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "SELECT update_session_secret()"
  },
  "a96b41d61b119e01b6ba029104e53401363c0cd4c1cee96754c8c14a3ac50bf6": {
    "describe": {
      "columns": [
        {
          "name": "workspace_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Bytea"
        ]
      }
    },
    "query": "INSERT INTO end_to_end_keys (workspace_id, activator) VALUES ($1, $2) RETURNING workspace_id"
  },
  "c3f2dd2e3dbf9c655b8a4b2bfaabf4503464f801c7e05d21fdf19a4e3b45a551": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "DELETE FROM sessions\n            WHERE session_id = $1\n            AND (hmac(session_token,\n                  (SELECT s.value\n                   FROM session_secrets s\n                   WHERE s.status = 'active'),\n                  'sha512') = decode($1, 'hex')\n                OR hmac(session_token,\n                        (SELECT s.value\n                         FROM session_secrets s\n                         WHERE s.status = 'phase_out'),\n                        'sha512') = decode($1, 'hex')\n                )"
  },
  "d72a05965e5e6646b9d99bea8cff7966be2274e5ee92f271b533d08ea2939680": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "INSERT INTO workspaces (owner_id, name) VALUES ($1, $2) RETURNING id"
  },
  "f4ae900b01fa7e3384b5aa359b732baef8bec9de1c44567d8d7930f83b11873f": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "pwd_hash",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "SELECT id, pwd_hash\n            FROM profiles\n            WHERE username = $1;"
  },
  "f8075a593bab3363c9d8493328a11b2179a79038e330aed990b74f076a211e61": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Text"
        ]
      }
    },
    "query": "WITH profile0 AS (\n                INSERT INTO profiles (username, pwd_hash)\n                    VALUES ($1, $2)\n                    RETURNING id)\n            INSERT\n            INTO emails (profile_id, address)\n            SELECT id, $3\n            FROM profile0\n            RETURNING profile_id AS id;"
  },
  "f94d227e93eaee2b7cc997e8ba6f97e6f2bfa6265289bc116b08c30a7d3ac77c": {
    "describe": {
      "columns": [
        {
          "name": "key_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "activator",
          "ordinal": 1,
          "type_info": "Bytea"
        },
        {
          "name": "value",
          "ordinal": 2,
          "type_info": "Bytea"
        }
      ],
      "nullable": [
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "SELECT key_id, activator, value\n            FROM end_to_end_key_variants\n            WHERE key_id = $1"
  }
}